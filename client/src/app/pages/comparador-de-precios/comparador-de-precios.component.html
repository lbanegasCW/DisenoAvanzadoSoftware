<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6">
  <div *ngIf="loading" class="text-gray-600 mb-3">Cargando comparación…</div>

  <div *ngIf="errorMsg" class="mb-3 rounded border border-red-300 bg-red-50 p-3 text-red-900">
    {{ errorMsg }}
  </div>

  <div class="overflow-x-auto bg-white border rounded-lg" *ngIf="!loading && vmRows.length">
    <table class="min-w-full text-sm">
      <thead class="bg-gray-50">
      <tr>
        <th class="text-left px-3 py-2 w-1/3">Producto</th>
        <th class="text-left px-3 py-2">Categoría</th>

        <th class="px-3 py-2" *ngFor="let id of colIds; trackBy: trackCol">
          {{ supName(id) }}
        </th>
      </tr>
      </thead>

      <tbody>
      <tr *ngFor="let r of vmRows; trackBy: trackRow" class="border-t">
        <td class="px-3 py-2 align-top">
          <div class="font-medium text-gray-900">{{ r.nomProducto }}</div>
          <div class="text-xs text-gray-500">EAN {{ r.codBarra }}</div>
        </td>

        <td class="px-3 py-2 align-top">
          {{ r.nomCategoria }}
        </td>

        <!-- ✅ RAW: sin pipes, sin parse -->
        <td class="px-3 py-2 text-center" *ngFor="let id of colIds; trackBy: trackCol">
          {{ r.pricesBySup[id] ?? '—' }}
        </td>
      </tr>
      </tbody>
    </table>
  </div>
</div>
